@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  @apply bg-base-100;
}

/* ================================
   MODERN CHAT STYLES - FULL WIDTH
================================ */

/* Main Chat Container */
.str-chat__channel {
  @apply flex items-center justify-center h-full bg-transparent;
}

.str-chat__container {
  @apply w-full h-full max-w-full m-0 overflow-hidden bg-transparent;
  border-radius: 0;
  box-shadow: none;
}

/* Hide default headers */
.str-chat__header-livestream,
.str-chat__channel-header {
  display: none !important;
}

/* Message List */
.str-chat__list {
  @apply p-6 bg-base-200;
  overflow-y: auto;
}

/* Notifications */
.str-chat__list-notifications {
  display: none;
}

/* ================================
   Message Bubbles (Full Width)
================================ */
.str-chat__message-simple {
  margin-bottom: 0.75rem;
  animation: slideInMessage 0.3s ease-out;
}

.str-chat__message-simple-text-inner {
  display: flex !important;
  flex-direction: column;
  width: 100% !important;
  max-width: 100% !important;
  word-break: break-word;
  overflow-wrap: anywhere;
  white-space: pre-wrap;
  padding: 0.75rem 1rem;
  border-radius: 1rem;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* Current user messages */
.str-chat__message-simple--me .str-chat__message-simple-text-inner {
  background: oklch(var(--p));
  color: oklch(var(--pc));
  border-bottom-right-radius: 0.25rem;
}

/* Other user messages */
.str-chat__message-simple:not(.str-chat__message-simple--me) .str-chat__message-simple-text-inner {
  background: oklch(var(--b2));
  color: oklch(var(--bc));
  border-bottom-left-radius: 0.25rem;
  border: 1px solid oklch(var(--bc)/0.1);
}

/* Links */
.str-chat__message-simple-text-inner a {
  color: oklch(var(--p));
  text-decoration: underline;
  font-weight: 500;
}
.str-chat__message-simple-text-inner a:hover {
  color: oklch(var(--pf));
}

/* Message Timestamp */
.str-chat__message-simple-timestamp {
  font-size: 0.75rem;
  color: oklch(var(--bc)/0.5);
  margin-top: 0.25rem;
}

/* Avatar */
.str-chat__avatar {
  width: 2rem;
  height: 2rem;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid oklch(var(--p));
}
.str-chat__avatar-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Message Input */
.str-chat__message-input {
  @apply p-4 border-t;
  border-color: oklch(var(--bc)/0.1);
  background: oklch(var(--b2));
}

.str-chat__message-input-inner {
  @apply px-4 py-2 rounded-full;
  border: 2px solid oklch(var(--bc)/0.1);
  background: oklch(var(--b1));
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  transition: all 0.2s;
}

.str-chat__message-input-inner:focus-within {
  border-color: oklch(var(--p));
  box-shadow: 0 0 0 3px oklch(var(--p)/0.1);
}

.str-chat__textarea textarea {
  @apply bg-transparent border-none outline-none resize-none w-full;
  font-size: 0.95rem;
  color: oklch(var(--bc));
  max-height: 120px;
  padding: 0.5rem 0;
}

.str-chat__textarea textarea::placeholder {
  color: oklch(var(--bc)/0.4);
}

/* Buttons */
.str-chat__send-button,
.str-chat__input-emojiselect,
.str-chat__input-fileupload {
  @apply flex items-center justify-center rounded-full cursor-pointer transition-all;
}

.str-chat__send-button {
  @apply w-10 h-10 bg-primary text-primary-content shadow-md;
  border: none;
}
.str-chat__send-button:hover {
  @apply scale-105;
}

/* Typing Indicator */
.str-chat__typing-indicator {
  @apply text-sm italic px-4 py-2;
  color: oklch(var(--bc)/0.6);
}
.str-chat__typing-indicator__dots {
  display: inline-flex;
  gap: 0.25rem;
}
.str-chat__typing-indicator__dot {
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
  background: oklch(var(--bc)/0.4);
  animation: typing-bounce 1.4s infinite;
}
.str-chat__typing-indicator__dot:nth-child(2) { animation-delay: 0.2s; }
.str-chat__typing-indicator__dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes typing-bounce {
  0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
  40% { transform: scale(1); opacity: 1; }
}

/* Date Separator */
.str-chat__date-separator {
  @apply text-center uppercase text-xs py-2 tracking-wider;
  color: oklch(var(--bc)/0.5);
}
.str-chat__date-separator-line {
  height: 1px;
  background: oklch(var(--bc)/0.1);
}

/* Scrollbar */
.str-chat__list::-webkit-scrollbar { width: 8px; }
.str-chat__list::-webkit-scrollbar-track { background: oklch(var(--b2)); }
.str-chat__list::-webkit-scrollbar-thumb { background: oklch(var(--bc)/0.2); border-radius: 4px; }
.str-chat__list::-webkit-scrollbar-thumb:hover { background: oklch(var(--bc)/0.3); }

/* Thread Panel */
.str-chat__thread { 
  background: oklch(var(--b1)); 
  border-left: 1px solid oklch(var(--bc)/0.1); 
  box-shadow: -4px 0 12px rgba(0,0,0,0.05);
}
.str-chat__thread-header {
  @apply p-4;
  background: oklch(var(--b2));
  border-bottom: 1px solid oklch(var(--bc)/0.1);
}

/* Animations */
@keyframes slideInMessage {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Dark Mode */
[data-theme="dark"] .str-chat__message-simple:not(.str-chat__message-simple--me) .str-chat__message-simple-text-inner {
  background: oklch(var(--b3));
  border-color: oklch(var(--bc)/0.2);
}

/* Mobile */
@media (max-width: 768px) {
  .str-chat__list { @apply p-4; }
  .str-chat__message-simple-text-inner { font-size: 0.9rem; }
  .str-chat__message-input { @apply p-3; }
}
